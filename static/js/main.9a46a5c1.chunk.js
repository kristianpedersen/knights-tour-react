(this["webpackJsonpknights-tour-react"]=this["webpackJsonpknights-tour-react"]||[]).push([[0],{34:function(t,e,n){},54:function(t,e,n){"use strict";n.r(e);var r=n(1),o=n(0),a=n.n(o),i=(n(34),n(7)),c=Object(o.createContext)(),u=function(t){var e=Object(o.useState)([]),n=Object(i.a)(e,2),a=n[0],u=n[1],l=Object(o.useState)(8),s=Object(i.a)(l,2),d=s[0],b=s[1],h=Object(o.useState)([]),f=Object(i.a)(h,2),m=f[0],j=f[1],p=Object(o.useState)(!1),v=Object(i.a)(p,2),g=v[0],x=v[1],O=Object(o.useRef)(100),y=Object(o.useRef)(),S=Object(o.useRef)();return Object(r.jsx)(c.Provider,{value:{board:a,setBoard:u,boardSize:d,setBoardSize:b,history:m,setHistory:j,modalIsOpen:g,setModalIsOpen:x,animationSpeed:O,boardRef:y,sliderRef:S,variants:{in:{opacity:1},out:{opacity:0}}},children:t.children})},l=n(2),s=n(4),d=n(11),b=n(3),h=n(21),f=n.n(h);function m(){var t=Object(l.a)(["\n\tjustify-content: center;\n\tbackground-color: #eee;\n\tfont-family: sans-serif;\n\tpadding: 2rem;\n\tborder-radius: 4px;\n\tborder: 1px solid #aaa;\n\n\th1 {\n\t\tpadding: 1rem 0;\n\t}\n\n\tli {\n\t\tmargin: 1rem 0;\n\t}\n"]);return m=function(){return t},t}function j(){var t=Object(o.useContext)(c),e=t.modalIsOpen,n=t.setModalIsOpen,a=t.variants;return f.a.setAppElement("#root"),Object(r.jsx)(f.a,{isOpen:e,onRequestClose:function(){n(!1)},children:Object(r.jsxs)(p,Object(s.a)(Object(s.a)({},{variants:a}),{},{children:[Object(r.jsx)("h1",{children:"About the knight's tour"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"The knight can only move to a position where xDistance=1 and yDistance=2, or vice versa."}),Object(r.jsx)("li",{children:"For each move, we find all valid moves, and choose the one that has the fewest options. This is known as Warnsdorff's rule."}),Object(r.jsx)("li",{children:"As a fun challenge, I made the algorithm without seeing other implementations, so it can probably be improved a lot."})]}),Object(r.jsx)("h1",{children:"Help wanted!"}),Object(r.jsxs)("p",{children:["I'd love to see your improvements and suggestions: ",Object(r.jsx)("a",{hreF:"https://github.com/KristianPedersen/knights-tour-react",children:"GitHub repo"})]})]}))})}var p=Object(b.a)(d.a.div).attrs((function(t){var e=t.variants;return{initial:e.out,animate:e.in,exit:e.out}}))(m()),v=n(14),g=n.n(v),x=n(15),O=n(31),y=n(5);function S(t){return new Promise((function(e){return setTimeout(e,t)}))}function w(){var t=Object(o.useContext)(c),e=t.animationSpeed,n=t.board,r=Object(o.useRef)(!0);return Object(o.useEffect)((function(){r.current&&(r.current=!1,console.log("Setting up event listener"),window.addEventListener("resize",(function(){if(null!==document.querySelector(".board")){var t=document.querySelector(".board").getBoundingClientRect().height;document.querySelectorAll("svg").forEach((function(e){return e.setAttribute("height",t)}))}})))})),Object(o.useEffect)((function(){var t=document.querySelector(".board").getBoundingClientRect(),r=t.width,o=t.height;if(n.length>=25){var a=Object(y.a)(document.querySelectorAll("button")),c=[].concat(Object(y.a)(document.querySelectorAll(".disable-when-animating")),Object(y.a)(document.querySelectorAll("p.info")));function u(){return(u=Object(O.a)(g.a.mark((function t(){var u,l,s,d;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u=Object(x.a)(n.entries()),t.prev=1,s=g.a.mark((function t(){var u,s,d,b,h,f,m,j,p,v,x,O,y,w,k,A,C,M,N,E,B,q,R,z,I,T,H,L;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(u=Object(i.a)(l.value,2),s=u[0],d=u[1],void 0!==(b=a.find((function(t){return t.innerHTML===d.name})))){t.next=4;break}return t.abrupt("return",{v:void 0});case 4:if(h="http://www.w3.org/2000/svg",(f=document.createElementNS(h,"svg")).setAttribute("preserveAspectRatio","none"),f.setAttribute("viewBox","0 0 ".concat(r," ").concat(o)),m="",j=document.querySelector(".board").getBoundingClientRect(),f.setAttributeNS(null,"width","100vw"),f.setAttributeNS(null,"height",j.height||0),p=document.createElementNS(h,"path"),v=document.createElementNS(h,"path"),x=Math.floor(s*(270/n.length)),O=b.getBoundingClientRect(),y=O.left,w=O.width,k=O.top,A=O.height,!(s>0)){t.next=39;break}if(C=y+w/2,M=Math.abs(k-document.querySelector(".board").getBoundingClientRect().top+A/2),void 0!==(N=a.find((function(t){return t.innerHTML===n[s-1].name})))){t.next=22;break}return t.abrupt("return",{v:void 0});case 22:for(N.innerHTML=s,s===n.length-1&&(b.innerHTML=s+1),E=N.getBoundingClientRect(),B={left:E.left,width:E.width,top:E.top,height:E.height},q=B.left+w/2,R=Math.abs(B.top-document.querySelector(".board").getBoundingClientRect().top+A/2),m+="M ".concat(C," ").concat(M," L ").concat(q," ").concat(R),p.setAttributeNS(null,"stroke","black"),v.setAttributeNS(null,"stroke","hsl(".concat(x,", 100%, 70%)")),p.setAttributeNS(null,"stroke-width",6),v.setAttributeNS(null,"stroke-width",3),z=0,I=[p,v];z<I.length;z++)(T=I[z]).setAttributeNS(null,"d",m),T.setAttributeNS(null,"stroke-linecap","round"),f.appendChild(T);1!==s&&s!==n.length-1||(H=new Set(n.map((function(t){return t.name}))).size===n.length,(L=document.createElementNS(h,"circle")).setAttributeNS(null,"cx",1===s?q:C),L.setAttributeNS(null,"cy",1===s?R:M),L.setAttributeNS(null,"r",Math.min(w,A)/Math.PI),L.setAttributeNS(null,"stroke-width",1),L.setAttributeNS(null,"fill",H?"lime":"red"),L.setAttributeNS(null,"stroke","black"),f.appendChild(L)),f.style.position="absolute",f.style.left=0,f.style.bottom=0,document.querySelector(".board").appendChild(f);case 39:return b.classList.add("active"),s>0&&s<n.length-1?(b.style.backgroundColor="hsl(".concat(x,", 50%, 80%)"),b.style.color="black"):(b.style.backgroundColor="#333",b.style.color="white",c.forEach((function(t){t.disabled=!1,t.style.color="black"}))),t.next=43,S(e.current);case 43:case"end":return t.stop()}}),t)})),u.s();case 4:if((l=u.n()).done){t.next=11;break}return t.delegateYield(s(),"t0",6);case 6:if("object"!==typeof(d=t.t0)){t.next=9;break}return t.abrupt("return",d.v);case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(1),u.e(t.t1);case 16:return t.prev=16,u.f(),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})))).apply(this,arguments)}document.querySelectorAll("svg").forEach((function(t){return t.remove()})),function(){u.apply(this,arguments)}()}}),[n]),null}function k(t,e,n){var r=Math.pow(n,2),o=Object(y.a)(Array(n)).map((function(t,e){return Object(y.a)(Array(n)).map((function(t,c){return function(t,e){var c=[],u=t+1;function l(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(a.length>0&&(i.push(Object(s.a)(Object(s.a)({},a[a.length-1]),{},{colorize:!0})),i.push.apply(i,Object(y.a)(c))),a.push(o[t][e]),a[a.length-1].visited=!0,o[t][e].visited=!0),u?c.push(c.shift()):c=d(),n&&c.length>0){var l,h=Object(x.a)(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;f.validMoves=f.getValidMoves(n=!1)}}catch(j){h.e(j)}finally{h.f()}c.sort((function(t,e){return t.validMoves.length-e.validMoves.length}));var m=c[0];o[m.x][m.y].getValidMoves()}else n&&0===c.length&&a.length<r&&b();return c}function d(){return o.flat().filter((function(n){var r=-1*Math.abs(n.x-t),o=-1*Math.abs(n.y-e);return(-2===r&&-1===o||-1===r&&-2===o)&&!n.visited}))}function b(){for(var t=a.length-1;t>=0;t--){if(a[t].validMoves.length>=2){var e=a[t],n=e.x,r=e.y;o[n][r].getValidMoves(!0,!0);break}a.pop()}}return{name:"".concat("ABCDEFGHIJKLMNOPQRSTUVWXYZ\xc6\xd8\xc5"[n-e-1]).concat(u),x:t,y:e,getValidMoves:l}}(e,c)}))})),a=[],i=[];if(o[t][e].validMoves=o[t][e].getValidMoves(),a.length===r)return{history:a,playback:i}}function A(){var t=Object(l.a)(["\n\tborder: 1px solid;\n\tdisplay: inline;\n\tborder-color: #666;\n\tbackground-color: #333;\n\tcolor: #ddd;\n\tcursor: pointer;\n\tfont-size: 1rem;\n\ttext-align: start;\n\tpadding-left: 0.5rem;\n\tpadding-right: -0.5rem;\n\t\n\t&:hover {\n\t\tbox-shadow: 0 0 10px white;\n\t}\n\n\t&.active:hover{\n\t\tbox-shadow: 0 0 10px black;\n\t}\n"]);return A=function(){return t},t}function C(t){var e=t.name,n=t.x,a=t.y,i=Object(o.useContext)(c),u=i.boardSize,l=i.setBoard;return Object(r.jsx)(M,{className:"board-button",onClick:function(){document.querySelectorAll("svg").forEach((function(t){return t.remove()})),document.querySelectorAll(".board-button").forEach((function(t){t.removeAttribute("style")}));var t=k(n,a,u).history;l(t)},children:e})}var M=b.a.button(A()),N=n(56);function E(){var t=Object(l.a)(["\n\tmargin-top: 1rem;\n\twidth: 100%;\n\theight: 80%;\n\t@media(max-width: 700px) {\n\t\theight: 50%;\n\t}\n\tdisplay: flex;\n\tbackground: #333;\n\tcolor: #aaa;\t\t\n\tposition: absolute;\n\tbottom: 0;\n\tleft: 0;\n\tright: 0;\n\n\thr {\n\t\tvisibility: hidden;\n\t}\n\n\t.row {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-evenly;\n\t\twidth: 100vw;\n\t}\n\n\tbutton {\n\t\tdisplay: inline-block;\n\t\theight: 100%;\n\t}\n"]);return E=function(){return t},t}function B(){var t=Object(o.useContext)(c),e=t.boardSize,n=t.setBoard,a=t.setHistory,i=t.variants;Object(o.useEffect)((function(){document.querySelectorAll("svg").forEach((function(t){return t.remove()})),document.querySelectorAll("button").forEach((function(t){return t.removeAttribute("style")}))}),[e]);for(var u=[],l=0;l<e;l++){for(var d=[],b=0;b<e;b++){var h="ABCDEFGHIJKLMNOPQRSTUVWXYZ\xc6\xd8\xc5"[e-b-1];d.push(Object(o.createElement)(C,Object(s.a)(Object(s.a)({name:"".concat(h).concat(l+1)},{boardSize:e,setBoard:n,setHistory:a,x:l,y:b}),{},{key:Object(N.a)()})))}u.push(d)}return Object(r.jsx)(q,Object(s.a)(Object(s.a)({className:"board"},{boardSize:e,variants:i}),{},{children:u.map((function(t){return Object(r.jsx)("div",{className:"row",children:t.map((function(t){return t}))})}))}))}var q=Object(b.a)(d.a.div).attrs((function(t){var e=t.variants;return{initial:e.out,animate:e.in,exit:e.out}}))(E());function R(){var t=Object(l.a)(["\n\tborder: 1px solid black;\n\tpadding: 0.5rem;\n"]);return R=function(){return t},t}function z(){var t=Object(l.a)(["\n\tdisplay: flex;\n\talign-items: flex-end;\n\tflex-wrap: wrap;\n\tjustify-content: space-around;\n\n\t@media (min-width: 728px) {\n\t\tflex-wrap: nowrap;\n\t}\n\n\tlabel {\n\t\tpadding: 0.5rem;\n\t\tbackground-color: hsl(194, 53%, 85%);\n\t\tborder: 1px solid #999;\n\t}\n\n\tbutton {\n\t\tpadding: 1rem;\n\t\tfont-size: 1rem;\n\t\tmargin: 1rem;\n\t\tmargin-top: 0;\n\t\tmargin-bottom: 0;\n\t}\n\n\tspan {\n\t\tmargin-top: 1rem;\n\t\tuser-select: none;\n\t\tmin-width: 10vw;\n\t\tdisplay: inline-block;\n\t\tmargin-left: 1rem;\n\t}\n"]);return z=function(){return t},t}function I(){var t=Object(o.useContext)(c),e=t.animationSpeed,n=t.boardSize,a=t.setBoardSize,i=t.setBoard,u=(t.sliderRef,Object(o.useRef)(null)),l=Object(o.useRef)(null);function s(t,e){t.preventDefault(),a(e)}return Object(o.useEffect)((function(){l.current.value=e.current}),[]),Object(r.jsx)(T,{children:Object(r.jsxs)("label",{htmlFor:"buttons",children:[Object(r.jsx)(H,{autoFocus:!0,className:"disable-when-animating",min:"5",max:"52",name:"num-cells",onChange:function(t){if(t.target.value<=52){var e=Number(t.target.value);a(e)}},type:"number",value:n}),Object(r.jsx)("span",{className:"info",children:"Board size (5-26)"}),Object(r.jsx)("button",{className:"disable-when-animating",onClick:function(t){return s(t,8)},children:"8x8"}),Object(r.jsx)("button",{className:"disable-when-animating",onClick:function(t){return s(t,26)},children:"26x26"}),Object(r.jsx)("button",{onClick:function(t){i([]),t.preventDefault(),document.querySelectorAll("svg").forEach((function(t){return t.remove()})),document.querySelectorAll("button").forEach((function(t){return t.removeAttribute("style")}))},children:"Clear"}),Object(r.jsx)("input",{min:"0",max:"500",name:"animation-speed",onChange:function(t){e.current=Number(t.target.value)||e.current,u.current.innerHTML="Interval: ".concat(e.current," ms")},ref:l,step:"5",type:"range"}),Object(r.jsx)("span",{ref:u,children:"Interval: ".concat(e.current," ms")})]})})}var T=b.a.form(z()),H=b.a.input(R()),L=n(9);function F(){var t=Object(l.a)(["\n\tdisplay: flex;\n\tjustify-content: space-evenly ;\n\tpadding: 1rem;\n\tbackground: hsl(350, 50%, 50%);\n\tcolor: white;\n\tbox-shadow: 0 0 10px 0 rgba(0,0,0,0.5);\n\tborder-bottom: 1px solid black;\n\n\tul{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tlist-style: none;\n\t}\n\n\t@media (min-width: 300px) {\n\t\tul {\n\t\t\tflex-direction: row;\n\t\t}\n\t}\n\n\tli {\n\t\tpadding: 0 5rem;\n\t\tcursor: pointer;\n\t\tcolor: white;\n\t\ttext-decoration: none;\n\t}\n"]);return F=function(){return t},t}function P(){var t=Object(o.useContext)(c).setModalIsOpen;return Object(r.jsxs)(D,{children:[Object(r.jsx)("h1",{children:"Knight's Tour"}),Object(r.jsxs)("ul",{children:[Object(r.jsx)(L.b,{exact:!0,to:"/knights-tour-react",children:Object(r.jsx)("li",{children:"Board"})}),Object(r.jsx)(L.b,{onClick:function(){document.querySelectorAll("svg").forEach((function(t){return t.remove()})),t(!0)},to:"/knights-tour-react/about",children:Object(r.jsx)("li",{children:"About"})})]})]})}var D=b.a.nav(F());var V=function(){return Object(r.jsx)(u,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(P,{}),Object(r.jsx)(w,{}),Object(r.jsx)(I,{}),Object(r.jsx)(B,{}),Object(r.jsx)(j,{})]})})},J=n(20),K=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(e){var n=e.getCLS,r=e.getFID,o=e.getFCP,a=e.getLCP,i=e.getTTFB;n(t),r(t),o(t),a(t),i(t)}))};n.n(J).a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(L.a,{children:Object(r.jsx)(V,{})})}),document.getElementById("root")),K()}},[[54,1,2]]]);
//# sourceMappingURL=main.9a46a5c1.chunk.js.map