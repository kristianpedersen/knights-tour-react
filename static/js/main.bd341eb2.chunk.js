(this["webpackJsonpknights-tour-react"]=this["webpackJsonpknights-tour-react"]||[]).push([[0],{34:function(t,e,n){},54:function(t,e,n){"use strict";n.r(e);var r=n(1),a=n(0),i=n.n(a),o=(n(34),n(6)),c=Object(a.createContext)(),s=function(t){var e=Object(a.useState)([]),n=Object(o.a)(e,2),i=n[0],s=n[1],l=Object(a.useState)(8),u=Object(o.a)(l,2),d=u[0],b=u[1],h=Object(a.useState)([]),f=Object(o.a)(h,2),m=f[0],p=f[1],v=Object(a.useState)(!1),j=Object(o.a)(v,2),g=j[0],x=j[1],O=Object(a.useRef)(50),y=Object(a.useRef)(),w=Object(a.useRef)();return Object(r.jsx)(c.Provider,{value:{animationSpeed:O,board:i,setBoard:s,boardRef:y,boardSize:d,setBoardSize:b,history:m,setHistory:p,modalIsOpen:g,setModalIsOpen:x,sliderRef:w,variants:{in:{opacity:1},out:{opacity:0}}},children:t.children})},l=n(2),u=n(4),d=n(8),b=n(3),h=n(21),f=n.n(h);function m(){var t=Object(l.a)(["\n\tbackground-color: #eee;\n\tborder-radius: 4px;\n\tborder: 1px solid #aaa;\n\tfont-family: sans-serif;\n\tjustify-content: center;\n\tpadding: 2rem;\n\n\th1 {\n\t\tpadding: 1rem 0;\n\t}\n\n\tli {\n\t\tmargin: 1rem 0;\n\t}\n"]);return m=function(){return t},t}function p(){var t=Object(a.useContext)(c),e=t.modalIsOpen,n=(t.setModalIsOpen,t.variants);return f.a.setAppElement("#root"),Object(r.jsx)(d.a,{exitBeforeEnter:!0,children:Object(r.jsx)(f.a,{isOpen:e,children:Object(r.jsxs)(v,Object(u.a)(Object(u.a)({},{variants:n}),{},{children:[Object(r.jsx)("h1",{children:"About the knight's tour"}),Object(r.jsx)("p",{children:Object(r.jsx)("a",{href:"https://www.wikiwand.com/en/Knight%27s_tour",children:"Read more at Wikipedia"})}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"The knight can only move to a position where xDistance=1 and yDistance=2, or vice versa."}),Object(r.jsx)("li",{children:"For each move, we find all valid moves, and choose the one that has the fewest onwards moves. This is known as Warnsdorff's rule."}),Object(r.jsx)("li",{children:"As a personal challenge, I made the algorithm without seeing other implementations, so I'm sure there are improvements to be made."})]}),Object(r.jsx)("h1",{children:"Help wanted!"}),Object(r.jsxs)("p",{children:["I'd love to see your improvements and suggestions: ",Object(r.jsx)("a",{href:"https://github.com/KristianPedersen/knights-tour-react",children:"GitHub repo"})]})]}))})})}var v=Object(b.a)(d.b.div).attrs((function(t){var e=t.variants;return{initial:e.out,animate:e.in,exit:e.out}}))(m()),j=n(14),g=n.n(j),x=n(15),O=n(31),y=n(9);function w(t){return new Promise((function(e){return setTimeout(e,t)}))}function S(){var t=Object(a.useContext)(c),e=t.animationSpeed,n=t.board,r=Object(a.useRef)(!0);return Object(a.useEffect)((function(){r.current&&(r.current=!1,console.log("Setting up event listener"),window.addEventListener("resize",(function(){if(null!==document.querySelector(".board")){var t=document.querySelector(".board").getBoundingClientRect().height;document.querySelectorAll("svg").forEach((function(e){return e.setAttribute("height",t)}))}})))})),Object(a.useEffect)((function(){var t=document.querySelector(".board").getBoundingClientRect(),r=t.width,a=t.height;if(n.length>=25){var i=Object(y.a)(document.querySelectorAll("button"));function c(){return(c=Object(O.a)(g.a.mark((function t(){var c,s,l,u;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:c=Object(x.a)(n.entries()),t.prev=1,l=g.a.mark((function t(){var c,l,u,d,b,h,f,m,p,v,j,x,O,y,S,k,A,N,C,M,E,B,R,q,z,I,L,T;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=Object(o.a)(s.value,2),l=c[0],u=c[1],void 0!==(d=i.find((function(t){return t.innerHTML===u.name})))){t.next=4;break}return t.abrupt("return",{v:void 0});case 4:if(b="http://www.w3.org/2000/svg",(h=document.createElementNS(b,"svg")).setAttribute("preserveAspectRatio","none"),h.setAttribute("viewBox","0 0 ".concat(r," ").concat(a)),f="",m=document.querySelector(".board").getBoundingClientRect(),h.setAttributeNS(null,"width","100vw"),h.setAttributeNS(null,"height",m.height||0),p=document.createElementNS(b,"path"),v=document.createElementNS(b,"path"),j=Math.floor(l*(270/n.length)),x=d.getBoundingClientRect(),O=x.left,y=x.width,S=x.top,k=x.height,!(l>0)){t.next=39;break}if(A=O+y/2,N=Math.abs(S-document.querySelector(".board").getBoundingClientRect().top+k/2),void 0!==(C=i.find((function(t){return t.innerHTML===n[l-1].name})))){t.next=22;break}return t.abrupt("return",{v:void 0});case 22:for(C.innerHTML=l,l===n.length-1&&(d.innerHTML=l+1),M=C.getBoundingClientRect(),E={left:M.left,width:M.width,top:M.top,height:M.height},B=E.left+y/2,R=Math.abs(E.top-document.querySelector(".board").getBoundingClientRect().top+k/2),f+="M ".concat(A," ").concat(N," L ").concat(B," ").concat(R),p.setAttributeNS(null,"stroke","black"),v.setAttributeNS(null,"stroke","hsl(".concat(j,", 100%, 70%)")),p.setAttributeNS(null,"stroke-width",6),v.setAttributeNS(null,"stroke-width",3),q=0,z=[p,v];q<z.length;q++)(I=z[q]).setAttributeNS(null,"d",f),I.setAttributeNS(null,"stroke-linecap","round"),h.appendChild(I);1!==l&&l!==n.length-1||(L=new Set(n.map((function(t){return t.name}))).size===n.length,(T=document.createElementNS(b,"circle")).setAttributeNS(null,"cx",1===l?B:A),T.setAttributeNS(null,"cy",1===l?R:N),T.setAttributeNS(null,"r",Math.min(y,k)/Math.PI),T.setAttributeNS(null,"stroke-width",1),T.setAttributeNS(null,"fill",L?"lime":"red"),T.setAttributeNS(null,"stroke","black"),h.appendChild(T)),h.style.position="absolute",h.style.left=0,h.style.bottom=0,document.querySelector(".board").appendChild(h);case 39:return d.classList.add("active"),l>0&&l<n.length-1?(d.style.backgroundColor="hsl(".concat(j,", 50%, 80%)"),d.style.color="black"):(d.style.backgroundColor="#333",d.style.color="white"),t.next=43,w(e.current);case 43:case"end":return t.stop()}}),t)})),c.s();case 4:if((s=c.n()).done){t.next=11;break}return t.delegateYield(l(),"t0",6);case 6:if("object"!==typeof(u=t.t0)){t.next=9;break}return t.abrupt("return",u.v);case 9:t.next=4;break;case 11:t.next=16;break;case 13:t.prev=13,t.t1=t.catch(1),c.e(t.t1);case 16:return t.prev=16,c.f(),t.finish(16);case 19:case"end":return t.stop()}}),t,null,[[1,13,16,19]])})))).apply(this,arguments)}document.querySelectorAll("svg").forEach((function(t){return t.remove()})),function(){c.apply(this,arguments)}()}}),[n,e]),null}function k(t,e,n){if(!(n<5||n>26)){var r=Math.pow(n,2),a=Object(y.a)(Array(n)).map((function(t,e){return Object(y.a)(Array(n)).map((function(t,c){return function(t,e){var c=[],s=t+1;function l(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(i.length>0&&(o.push(Object(u.a)(Object(u.a)({},i[i.length-1]),{},{colorize:!0})),o.push.apply(o,Object(y.a)(c))),i.push(a[t][e]),i[i.length-1].visited=!0,a[t][e].visited=!0),s?c.push(c.shift()):c=d(),n&&c.length>0){var l,h=Object(x.a)(c);try{for(h.s();!(l=h.n()).done;){var f=l.value;f.validMoves=f.getValidMoves(n=!1)}}catch(p){h.e(p)}finally{h.f()}c.sort((function(t,e){return t.validMoves.length-e.validMoves.length}));var m=c[0];a[m.x][m.y].getValidMoves()}else n&&0===c.length&&i.length<r&&b();return c}function d(){return a.flat().filter((function(n){var r=-1*Math.abs(n.x-t),a=-1*Math.abs(n.y-e);return(-2===r&&-1===a||-1===r&&-2===a)&&!n.visited}))}function b(){for(var t=i.length-1;t>=0;t--){if(i[t].validMoves.length>=2){var e=i[t],n=e.x,r=e.y;a[n][r].getValidMoves(!0,!0);break}i.pop()}}return{name:"".concat("ABCDEFGHIJKLMNOPQRSTUVWXYZ"[n-e-1]).concat(s),x:t,y:e,getValidMoves:l}}(e,c)}))})),i=[],o=[];if(a[t][e].validMoves=a[t][e].getValidMoves(),i.length===r)return{history:i,playback:o}}}function A(){var t=Object(l.a)(["\n\tbackground-color: #333;\n\tborder: 1px solid #666;\n\tcolor: #ddd;\n\tcursor: pointer;\n\tdisplay: inline;\n\tfont-size: 1rem;\n\tpadding-left: 0.5rem;\n\tpadding-right: -0.5rem;\n\ttext-align: start;\n\ttransition: ease .1s all;\n\t\n\t&:hover {\n\t\tbox-shadow: 0 0 10px white;\n\t}\n\n\t&.active:hover{\n\t\tbox-shadow: 0 0 10px black;\n\t}\n"]);return A=function(){return t},t}function N(t){var e=t.name,n=t.x,i=t.y,o=Object(a.useContext)(c),s=o.boardSize,l=o.setBoard;return Object(r.jsx)(C,{className:"board-button",onClick:function(){document.querySelectorAll("svg").forEach((function(t){return t.remove()})),document.querySelectorAll(".board-button").forEach((function(t){t.removeAttribute("style")}));var t=k(n,i,s).history;l(t)},children:e})}var C=b.a.button(A()),M=n(56);function E(){var t=Object(l.a)(["\n\tbackground: #333;\n\tbottom: 0;\n\tcolor: #aaa;\t\t\n\tdisplay: flex;\n\theight: 80%;\n\tleft: 0;\n\tmargin-top: 1rem;\n\tposition: absolute;\n\tright: 0;\n\n\thr {\n\t\tvisibility: hidden;\n\t}\n\n\t.row {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tjustify-content: space-evenly;\n\t\twidth: 100vw;\n\t}\n\n\tbutton {\n\t\tdisplay: inline-block;\n\t\theight: 100%;\n\t}\n"]);return E=function(){return t},t}function B(){var t=Object(a.useContext)(c),e=t.boardSize,n=t.setBoard,i=t.setHistory,o=t.variants;Object(a.useEffect)((function(){document.querySelectorAll("svg").forEach((function(t){return t.remove()})),document.querySelectorAll("button").forEach((function(t){return t.removeAttribute("style")}))}),[e]);for(var s=[],l=0;l<e;l++){for(var d=[],b=0;b<e;b++){var h="ABCDEFGHIJKLMNOPQRSTUVWXYZ"[e-b-1];d.push(Object(a.createElement)(N,Object(u.a)(Object(u.a)({name:"".concat(h).concat(l+1)},{boardSize:e,setBoard:n,setHistory:i,x:l,y:b}),{},{key:Object(M.a)()})))}s.push(d)}return Object(r.jsx)(R,Object(u.a)(Object(u.a)({className:"board"},{boardSize:e,variants:o}),{},{children:s.map((function(t){return Object(r.jsx)("div",{className:"row",children:t.map((function(t){return t}))})}))}))}var R=Object(b.a)(d.b.div).attrs((function(t){var e=t.variants;return{initial:e.out,animate:e.in,exit:e.out}}))(E());function q(){var t=Object(l.a)(["\n\t@media(min-width: 1024px) {\n\t\tmin-width: 33vw;\n\t}\n"]);return q=function(){return t},t}function z(){var t=Object(l.a)(["\n\tborder: 1px solid black;\n\tpadding: 0.5rem;\n"]);return z=function(){return t},t}function I(){var t=Object(l.a)(["\n\talign-items: flex-start;\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\tjustify-content: space-around;\n\n\t@media (min-width: 728px) {\n\t\tflex-wrap: nowrap;\n\t}\n\n\tlabel {\n\t\tbackground-color: hsl(194, 53%, 85%);\n\t\tborder: 1px solid #999;\n\t\tmargin-bottom: 1rem;\n\t\tpadding: 1rem;\n\t\t@media(max-width: 720px) {\n\t\t\tdisplay: none;\n\t\t}\n\t}\n\n\tbutton {\n\t\tfont-size: 1rem;\n\t\tmargin-bottom: 0;\n\t\tmargin-top: 0;\n\t\tmargin: 1rem;\n\t\tpadding: 1rem;\n\t}\n\n\tp {\n\t\tmargin-left: 1rem;\n\t\tmargin-top: 1rem;\n\t\tuser-select: none;\n\t}\n"]);return I=function(){return t},t}function L(){var t=Object(a.useContext)(c),e=t.animationSpeed,n=t.boardSize,i=t.setBoardSize,o=t.setBoard,s=Object(a.useRef)(null),l=Object(a.useRef)(null);function u(t,e){t.preventDefault(),i(e)}return Object(a.useEffect)((function(){l.current.value=e.current}),[e]),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(T,{children:[Object(r.jsxs)("label",{htmlFor:"board-size",onClick:function(t){"P"===t.target.tagName?t.target.previousSibling.focus():"LABEL"===t.target.tagName&&t.target.querySelector("input").focus()},children:[Object(r.jsx)(F,{autoFocus:!0,className:"disable-when-animating",min:"5",max:"55",name:"num-cells",onChange:function(t){if(t.target.value<=26){var e=Number(t.target.value);i(e)}},type:"number",value:n}),Object(r.jsx)("p",{className:"info",children:"Board size (5-26)"})]}),Object(r.jsxs)("label",{htmlFor:"buttons",children:[Object(r.jsx)("button",{className:"disable-when-animating",onClick:function(t){return u(t,8)},children:"8x8"}),Object(r.jsx)("button",{className:"disable-when-animating",onClick:function(t){return u(t,26)},children:"26x26"}),Object(r.jsx)("button",{onClick:function(t){o([]),t.preventDefault(),document.querySelectorAll("svg").forEach((function(t){return t.remove()})),document.querySelectorAll("button").forEach((function(t){return t.removeAttribute("style")}))},children:"Clear"})]}),Object(r.jsxs)("label",{htmlFor:"animation-speed",children:[Object(r.jsx)(H,{min:"0",max:"500",name:"animation-speed",onChange:function(t){e.current=Number(t.target.value)||e.current,s.current.innerHTML="Interval: ".concat(e.current," ms")},ref:l,step:"5",type:"range"}),Object(r.jsx)("p",{ref:s,children:"Interval: ".concat(e.current," ms")})]})]}),Object(r.jsxs)("ul",{children:[Object(r.jsx)("li",{children:"Each move is 1 horizontal step and 2 vertical steps, or 2 horizontal steps and 1 vertical step."}),Object(r.jsx)("li",{children:"The colors shift through the rainbow spectrum as the board is completed."}),Object(r.jsx)("li",{children:"Green starting dot = successful move. Red starting dot = no solution found"})]})]})}var T=b.a.form(I()),F=b.a.input(z()),H=b.a.input(q()),P=n(13);function D(){var t=Object(l.a)(["\n\tbackground: hsl(350, 50%, 50%);\n\tborder-bottom: 1px solid black;\n\tbox-shadow: 0 0 10px 0 rgba(0,0,0,0.5);\n\tcolor: white;\n\tdisplay: flex;\n\tjustify-content: space-evenly ;\n\tpadding: 1rem;\n\n\tul{\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tlist-style: none;\n\t}\n\n\t@media (min-width: 300px) {\n\t\tul {\n\t\t\tflex-direction: row;\n\t\t}\n\t}\n\n\tli {\n\t\tcolor: white;\n\t\tcursor: pointer;\n\t\tpadding: 0 5rem;\n\t\ttext-decoration: none;\n\t}\n"]);return D=function(){return t},t}b.a.nav(D());var V=function(){return Object(r.jsx)(s,{children:Object(r.jsxs)("div",{className:"App",children:[Object(r.jsx)(L,{}),Object(r.jsx)(B,{}),Object(r.jsx)(S,{}),Object(r.jsx)(p,{})]})})},G=n(20),J=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,o=e.getTTFB;n(t),r(t),a(t),i(t),o(t)}))};n.n(G).a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(P.a,{children:Object(r.jsx)(V,{})})}),document.getElementById("root")),J()}},[[54,1,2]]]);
//# sourceMappingURL=main.bd341eb2.chunk.js.map